<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Tetris</title>
	<link rel="stylesheet" href="./tetris.css">
</head>
<body onselectstart="return false">
	<div id="main">
		<div id="stage"> </div>
		<div id="manual">
			<p>â† å‘å·¦</p>
			<p>â†‘ å˜æ¢</p>
			<p>â†’ å‘å³</p>
			<p>â†“ å‘ä¸‹</p>
			<p>space ç¬é—´ç§»åŠ¨</p>
			<div id="score-box">
				å¾—åˆ†: <span id="score">0</span>
			</div>
			<a href="javascript:;" class="ball" onclick="tetris.pause()">æš‚åœ</a>
			<a href="javascript:;" class="ball" onclick="tetris.start(); stage.className='';">ç»§ç»­</a>
			<a href="javascript:;" class="ball" onclick="tetris.restart(); stage.className='';">é‡æ–°å¼€å§‹</a>
		</div>
		<div id="next">
			
		</div>
	</div>
</body>
<script src="./tetris.js"></script>
<script>
	var w = 15;

	var score = document.getElementById('score');
	var stage = document.getElementById('stage');
	var next = document.getElementById('next');
	stage.style.width = w*25 + 'px';

	var tetris = new Tetris(stage, w).on('score', function(a, b) {
		score.innerHTML = +score.innerHTML + b*b*10 ;
	})
	.on('lose', function() {
		if(confirm('æ¸¸æˆç»“æŸ! è¿˜æƒ³ç©å—? ğŸ˜˜'))
				this.restart();
	})
	.on('pause', function() {
		stage.className = 'pause';
	})
	.on('start', function(tile) {
		var html = ''
		tile.forEach(function(e) {
			html += e.replace(/0/g, '<div></div>').replace(/1/g, '<div style="background:#6cf"></div>');
		});
		next.innerHTML = html;
	})
	.start()
</script>
</html>